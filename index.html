<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Internet Speed Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    height: 100vh;
    background:
      radial-gradient(circle at top, #1c2238, #0a0d1a);
    font-family: "Segoe UI", sans-serif;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
}

.app {
    width: 420px;
    text-align: center;
}

h1 {
    margin: 10px 0 5px;
    letter-spacing: 2px;
}

.subtitle {
    opacity: 0.7;
    font-size: 14px;
    margin-bottom: 10px;
}

/* BUTTON */
button {
    margin-top: 25px;
    padding: 14px 42px;
    border-radius: 30px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    background: linear-gradient(135deg, #18e0ff, #0fc1da);
    color: #000;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(24,224,255,0.4);
}

button:hover {
    box-shadow: 0 15px 45px rgba(24,224,255,0.6);
}

/* SPEED TEXT */
.speed {
    font-size: 42px;
    font-weight: 600;
    margin-top: -220px;
}

.unit {
    font-size: 16px;
    opacity: 0.7;
}

.status {
    margin-top: 8px;
    font-size: 14px;
    opacity: 0.8;
}
</style>
</head>

<body>

<div class="app">
    <h1>INTERNET SPEED TEST</h1>
    <div class="subtitle">Professional Network Performance Analyzer</div>

    <!-- SVG GAUGE -->
    <svg width="360" height="360" viewBox="0 0 360 360">
        <!-- Background arc -->
        <path d="M60 220 A120 120 0 1 1 300 220"
              fill="none"
              stroke="#1b2a4e"
              stroke-width="22"
              stroke-linecap="round"/>

        <!-- Active arc -->
        <path id="activeArc"
              d="M60 220 A120 120 0 1 1 300 220"
              fill="none"
              stroke="#18e0ff"
              stroke-width="22"
              stroke-linecap="round"
              stroke-dasharray="0 1000"/>

        <!-- Tick marks + labels -->
        <g fill="#9fdfff" font-size="12" text-anchor="middle">
            <text x="60"  y="235">0</text>
            <text x="90"  y="175">5</text>
            <text x="135" y="130">10</text>
            <text x="180" y="110">50</text>
            <text x="225" y="130">100</text>
            <text x="270" y="175">200</text>
            <text x="300" y="235">300</text>
        </g>

        <!-- Needle -->
        <g id="needle" transform="rotate(-120 180 220)">
            <line x1="180" y1="220" x2="180" y2="120"
                  stroke="white" stroke-width="4"/>
        </g>
    </svg>

    <div class="speed" id="speedValue">0</div>
    <div class="unit">Mbps</div>

    <button onclick="startTest()">START TEST</button>
    <div class="status" id="status">Ready</div>
</div>

<script>
const maxSpeed = 300;
const minAngle = -120;
const maxAngle = 120;
const arcLengthTotal = 754; // correct SVG arc length

function startTest() {
    const speedEl = document.getElementById("speedValue");
    const needle = document.getElementById("needle");
    const arc = document.getElementById("activeArc");
    const status = document.getElementById("status");

    status.innerText = "Testing download speed…";

    let speed = 0;
    let target = Math.random() * 200 + 50; // realistic target

    let interval = setInterval(() => {
        speed += Math.random() * 6;

        if (speed >= target) {
            speed = target;
            clearInterval(interval);
            status.innerText = "Test completed successfully";
        }

        // 1️⃣ Number display
        speedEl.innerText = speed.toFixed(1);

        // 2️⃣ PERFECT needle mapping
        let angle =
            minAngle +
            (speed / maxSpeed) * (maxAngle - minAngle);

        needle.setAttribute(
            "transform",
            `rotate(${angle} 180 220)`
        );

        // 3️⃣ PERFECT arc fill mapping
        let arcLength =
            (speed / maxSpeed) * arcLengthTotal;

        arc.style.strokeDasharray =
            `${arcLength} ${arcLengthTotal}`;

    }, 60);
}
</script>

</body>
</html>
